<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data | Evaluating the Value of Players in Fantasy Premier League</title>
  <meta name="description" content="Chapter 3 Data | Evaluating the Value of Players in Fantasy Premier League" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data | Evaluating the Value of Players in Fantasy Premier League" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data | Evaluating the Value of Players in Fantasy Premier League" />
  
  
  

<meta name="author" content="Elliot Frank, Sebastian Steiner, Mengsu Alan Yang" />


<meta name="date" content="2022-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="proposal.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">FPL_Player_Value</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="proposal.html"><a href="proposal.html#data-source"><i class="fa fa-check"></i><b>2.2.1</b> Data Source</a></li>
<li class="chapter" data-level="2.2.2" data-path="proposal.html"><a href="proposal.html#data-file-format-and-importing"><i class="fa fa-check"></i><b>2.2.2</b> Data File Format and Importing</a></li>
<li class="chapter" data-level="2.2.3" data-path="proposal.html"><a href="proposal.html#data-fields-available"><i class="fa fa-check"></i><b>2.2.3</b> Data Fields Available</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#location-of-data-storage"><i class="fa fa-check"></i><b>3.1.1</b> Location of Data Storage</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#method-of-data-collection"><i class="fa fa-check"></i><b>3.1.2</b> Method of Data Collection</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.2</b> Cleaning / transformation</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.3</b> Missing value analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#player-value-using-total-points-cost"><i class="fa fa-check"></i><b>4.1</b> Player Value Using Total Points &amp; Cost</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="results.html"><a href="results.html#filtering-out-bench-players"><i class="fa fa-check"></i><b>4.1.1</b> Filtering Out Bench Players</a></li>
<li class="chapter" data-level="4.1.2" data-path="results.html"><a href="results.html#vizualizing-the-problem"><i class="fa fa-check"></i><b>4.1.2</b> Vizualizing The Problem</a></li>
<li class="chapter" data-level="4.1.3" data-path="results.html"><a href="results.html#player-value-by-position"><i class="fa fa-check"></i><b>4.1.3</b> Player Value By Position</a></li>
<li class="chapter" data-level="4.1.4" data-path="results.html"><a href="results.html#player-value-by-team"><i class="fa fa-check"></i><b>4.1.4</b> Player Value By Team</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#player-value-over-time"><i class="fa fa-check"></i><b>4.2</b> Player Value over Time</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="results.html"><a href="results.html#predicting-when-players-score-the-most-points"><i class="fa fa-check"></i><b>4.2.1</b> Predicting When Players Score the Most Points</a></li>
<li class="chapter" data-level="4.2.2" data-path="results.html"><a href="results.html#can-we-buy-low-sell-high"><i class="fa fa-check"></i><b>4.2.2</b> Can We Buy Low &amp; Sell High?</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="results.html"><a href="results.html#correlation-between-cost-selected-by-percentage"><i class="fa fa-check"></i><b>4.3</b> Correlation Between Cost &amp; Selected By Percentage</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Evaluating the Value of Players in Fantasy Premier League</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="sources" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Sources<a href="data.html#sources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="location-of-data-storage" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Location of Data Storage<a href="data.html#location-of-data-storage" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All data to be used for data exploration can be found in the link below.</p>
<p>Source: <a href="http://fantasyoverlord.com/FPL/History" class="uri">http://fantasyoverlord.com/FPL/History</a></p>
<p>All used CSV files of athletes’ performance for any week in Seasons 2017, 2018, 2019, 2020, and 2021 can be found in the link and all data downloaded for use can also be found in the Github “Data” folder.</p>
</div>
<div id="method-of-data-collection" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Method of Data Collection<a href="data.html#method-of-data-collection" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>According the English Premier League’s (EPL) website, the official Premier League performance
data is collected and analyzed by Opta, a third party analytics company, and shared publicly on the EPL website. The data
collection process is described below:</p>
<p>“Live data is collected by a three-person team covering each match. Two highly
trained analysts use a proprietary video-based collection system to gather
information on what happens every time a player touches the ball, which player
it was and where on the pitch the action occurred… a quality control analyst
has the ability to rewind the video feed frame-by-frame in order to make certain
that the information being distributed is as precise and consistent as possible.”
[<a href="https://www.premierleague.com/stats/clarification" class="uri">https://www.premierleague.com/stats/clarification</a>]</p>
<p>Fantasy Overlord, a database maintained by Fantasy Football enthusiasts
attempting to forecast player fantasy performance, routinely scrapes athlete stats from the EPL website, as well
as game information from the official site for Fantasy Premier League.
Given our project’s interest lies in how player performance is translated into ‘fantasy points’, data sets publicly available on fantasyoverlord.com are used.</p>
<p>The primary reason for using Fantasy
Overlord is that their data includes the EPL player performance data, as well as
fantasy player ‘costs’ and fantasy player point totals on a week by week basis,
which is not available on the EPL website. Additionally, the data set we’re using
also represents all information available to fantasy players. While we won’t be leveraging
the website’s models or predictions, Fantasy Overlord makes their data publicly
available on their website.</p>
<p>Fantasy Overlord’s data is organized in CSV files by Game week, spanning the
full 2017 and 2021 seasons. Each Premier League season is composed of 38 match
weeks, during which each of the 20 teams play one game. As such, “Games” among
fantasy players occur over the course of a full week, ensuring that all players
on a fantasy roster record a performance which translates to points.</p>
<p>The data in one match week file captures the player points applicable in
one fantasy game, for all players in the league. For this project, we will be
aggregating the 38 match weeks across 5 seasons, for a total of 190 match weeks
of data. All CSV filed are downloaded and compiled.</p>
<p>The CSV files contains basic player attributes such as: Name, Position, and Team.
Player performance metrics include Total Points, Assists, Minutes Played, Goals Scored,
Yellow Cards, Red Cards, and Clean Sheets. Player cost metrics include Cost,
Total Points Per Dollar, Average Points Per Dollar, and Price Change From Previous Week.
Lastly, player point metrics include Points Last Round, Total Points, and Average Points
Per Week.</p>
<p>We believe our data is objective in the sense that no sampling and polls are performed.
As outlined above, the EPL has processes in place to ensure the performance data
they collect is as accurate as possible. Opta has no ulterior motive in
manipulating the data to demonstrate any political or financial claim. Fantasy
Overlord also holds incentives to ensure their data is correct, as errors in
data collection undermines their objective of providing accurate forecasts.</p>
</div>
</div>
<div id="cleaning-transformation" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Cleaning / transformation<a href="data.html#cleaning-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The code we used for data cleaning and transformation can be viewed in the “combine_data_v2.Rmd” file. Our data for each season is parsed across one file for each week, as such the first step in our transformation process was to compile all of the weeks and seasons into one dataset.</p>
<p>The `import_columns’ list shows the variables from each weekly data set that we compiled. In lines 32-47, we loop through each file, retain the desired columns, and append the observations to a master dataframe. From the filename of each weekly data set, we added a match week (‘Week’) column, as well as distinguished the season (‘Year’). Lastly, we converted field types of numerical fields from strings to numerics for use and later calculations. The resulting dataframe is saved as a .CSV in Data/main with the name “master.csv.”</p>
<p>For use, when the data is imported again, three columns are appended (AssistPoints, GoalScoredPoints, and CleanSheetsPoints), which represnts the conversion from player stats to fantasy points. For every row, the numerical value for each of the following three columns are calculated as follows:</p>
<ul>
<li><em>Forwards:</em> assists are multiplied by 3, goals are multiplied by 4, and clean sheets are multiplied by 0</li>
<li><em>Midfielders:</em> assists are multiplied by 3, goals are multiplied by 5, and clean sheets are multiplied by 1</li>
<li><em>Defenders:</em> assists are multiplied by 3, goals are multiplied by 5, and clean sheets are multiplied by 4.</li>
</ul>
<p>(Note a clean sheet occurs when a team does not conceded a goal during a soccer match)</p>
<p>Finally, during the transformation process, we decided to eliminate soccer players in the goalkeeper position. We chose to do this because goalkeepers are a specialist position, which makes it difficult to include them with forwards, midfielders and defenders in meaningful analysis.</p>
</div>
<div id="missing-value-analysis" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Missing value analysis<a href="data.html#missing-value-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With all CSV files imported, merged, and verified as tidy, we know what an ideal dataset should look like – a dataframe where observations of athlete performance should exists for every season between 2017 and 2021 for every week in those seasons. We then proceed to visualize the availability of our data over each season and week by showing tiles where they exist, so we can have an understanding of the distribution of observations over Season and Week. In the graph shown, we can see that we are missing a few select seemingly random weeks in 2019 and 2020, but in 2019 we also observe that there is a missing pattern where every week after 32, with the exception of 35, is missing. Taking the data to context, one can realize that the missing data from the end of the 2019 season is due to the emergence of Covid-19. With knowledge of what weeks we are missing, we proceed forward in the analysis.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Leveraging the source code of the “plot_missing” function for modification, the missing patterns in the dataset is plotted, showing the affected variables and the percent rows and percent rows missing. We find that about 90% of the data is complete and fully populated. Out of the last 10%, all of them are missing the entry for the first name of the players, and an indiscernible small number of rows are showing a missing pattern of missing YellowCards, CleanSheets, Assists, SelectedByPercent, OwnGoals, MinutesPlayed, and RedCards. Since the first names of the players present little value when the last names are present (since last names in the premier league are usually unique), the data we have on the weeks where available are effectively fully complete for the purpose of our analysis.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="proposal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ss16318/FantasyPremierLeaguePlayerValue/edit/main/data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ss16318/FantasyPremierLeaguePlayerValue/blob/main/data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
